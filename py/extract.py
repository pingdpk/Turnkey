# s = '0d0a3a32303a424a415a4250533230333237303931380d0a3a32333a535354500d0a3a3532413a424a415a53414a450d0a3a3731413a5348410d0a3a32313a48494d423031313232483030343234350d0a3a3332423a53415232353335372c30300d0a3a35304b3a2f5341373036303030303030303135343730363139353030310d0a54414d455220544142554b204c4c4d4741574c4154204553540d0a3a35393a2f5341363938303030303134393630383031303232353731340d0a4154544159455220464143544f52590d0a3a37303ad4d1c7c120d3e4d920d4ced5eac90d0a3a32313a45434f463031313232483031313432330d0a3a3332423a53415235303030302c30300d0a3a35304b3a2f5341373136303130303031303439353030333830313030310d0a42414c4d41524b482052455354415552414e54530d0a3a35393a2f5341353938303030303331393630383031303036363535390d0a4a414d4a4f4d20524953450d0a3a37303ad4d1c7c120d3e4d920d4ced5eac90d0a3a32313a45434f463031313232483031313432340d0a3a3332423a53415231353930302c30300d0a3a35304b3a2f5341353336303130303030303639353030343732373030310d0a4f50454e204d41524b45542043454e54455220434f0d0a3a35393a2f5341343838303030303234303630383031303630373839330d0a4654484559482053414c454820414c59415a4944492054524144494e470d0a3a37303ae5d5c7d1eae120cad4daeae4eac90d0a3a32313a45434f463031313232483031313432350d0a3a3332423a534152373030302c30300d0a3a35304b3a2f5341313636303130303033333839353030363531313030310d0a4d4f4a414d41205341464120414c204f524f42414820414c544142490d0a3a35393a2f5341323038303030303531363630383031303138313437340d0ae5cce5d920c7e4e5c7d320c7e4d7c8e920e4d7c820c7e4c7d3e6c7e60d0a3a37303ae5d5c7d1eae120cad4daeae4eac90d0a3a32313a48494d423031313232483030343235300d0a3a3332423a534152343630302c30300d0a3a35304b3a2f5341363436303130303033303638303139313932303030320d0a414244554c57414841422041414c49204d5553414c4c414d20414c4d414e4a554d490d0a3a35393a2f5341313038303030303139393630383031303230333432310d0ae8e4eacf20d9cbe5c7e620cad1e3ea20c7e4cbc8eacaea0d0a3a37303ad1ced520c8e6c7c10d0a3a32313a48494d423031313232483030343235330d0a3a3332423a5341523331302c30300d0a3a35304b3a2f5341393036303030303030303230343237343833323030310d0a41484c414d20414244554c4c4148204d4f48414d4d454420414c48415a41410d0a3a35393a2f5341393438303030303230353630383031303330393237390d0a41484c414d20414244414c4c414820414c2d48415a5a410d0a3a37303acacde8eae420e4cdd3c7c820d4ced5ea20e1ea20c8e6e320c2ced10d0a3a32313a48494d423031313232483030343230310d0a3a3332423a5341523331352c30300d0a3a35304b3a2f5341373836303130303030333638303738323835383030310d0a524147484144204d4f48414d4d454420415741444820414c53414c41480d0a3a35393a2f5341363038303030303230303630383031303139313939350d0ae5e6ead1e720eacdeae920cde5cf20c7e4d5e2eae70d0a3a37303ad4d1c7c120d3e4d920d4ced5eac90d0a3a32313a48494d423031313232483030343230340d0a3a3332423a53415231303030302c30300d0a3a35304b3a2f5341353136303030303030303032323532353136303030310d0a4d455346455220414c57455341594d45520d0a3a35393a2f5341353738303030303233323630383031303434303033300d0ad0e8eae720e5d5e4d720c7e4d0eac7c8ea0d0a3a37303ac7e4c3e7e420e8c7e4c3e2c7d1c82f20c7e4c3d5cfe2c7c10d0a3a32313a48494d423031313232483030343230350d0a3a3332423a5341523230302c30300d0a3a35304b3a2f5341343136303030303030303033363331303830363030310d0a4f48554420414244554c4c4148204d4148414c20414c414e415a490d0a3a35393a2f5341383938303030303331303630383031303036313332380d0a414641460d0a3a37303ac7e4c3e7e420e8c7e4c3e2c7d1c82f20c7e4c3d5cfe2c7c10d0a3a32313a48494d423031313232483030343230360d0a3a3332423a5341523336322c30300d0a3a35304b3a2f5341303336303030303030303331303630323135323030310d0a41484d4544204142444c415a495a204142524148494d20414c414d45520d0a3a35393a2f5341343538303030303632383630383031303536353635350d0a53414841524120434f4d4d45524349414c20434f52504f524154494f4e0d0a3a37303ad4d1c7c120d3e4d920d4ced5eac90d0a3a32313a48494d423031313232483030343231390d0a3a3332423a534152313030302c30300d0a3a35304b3a2f5341373236303130303031353738303634333339313030310d0a4e4149462047484f524d414c4c4820414c4920414c5a414852414e490d0a3a35393a2f5341343438303030303137373630383031303638373435340d0ae6c7eae120dad1e520c7e4e4e720c7e4d2e7d1c7e6ea0d0a3a37303acacde8eae420e4cdd3c7c820d4ced5ea20e1ea20c8e6e320c2ced10d0a3a32313a48494d423031313232483030343232300d0a3a3332423a5341523430302c30300d0a3a35304b3a2f5341393136303030303030303033383436373836323030310d0a5741534d49414820534141442048414d454420414c535542414945450d0a3a35393a2f5341313538303030303231393630383031303036363333370d0a5741534d49414820414c534245414c0d0a3a37303ac7d3cacbe5c7d10d0a3a32313a45434f463031313232483031313432310d0a3a3332423a534152323338332c30300d0a3a35304b3a2f5341353336303130303030303639353030343732373030310d0a4f50454e204d41524b45542043454e54455220434f0d0a3a35393a2f5341393738303030303436333630383031303134333136320d0a53414d414120414c5348414d454c20434f4d50414e590d0a3a37303ae5d5c7d1eae120cad4daeae4eac90d0a3a32313a45434f463031313232483031313431350d0a3a3332423a534152323237372c30300d0a3a35304b3a2f5341383936303130303031303439353030363135373030310d0a484553415420414c4153414420524553545552414e540d0a3a35393a2f5341343438303030303130313630383031303333333332340d0a484f555345204f4620434154455245522054524144494e4720434f4d50414e590d0a3a37303ae5d5c7d1eae120cad4daeae4eac90d0a3a32313a45434f463031313232483031313431360d0a3a3332423a534152393231302c30300d0a3a35304b3a2f5341383936303130303031303439353030363135373030310d0a484553415420414c4153414420524553545552414e540d0a3a35393a2f5341343238303030303537323630383031303034343431380d0ad1c7d4cf20e8c7e4e520cdd3eae620c7e4e2c8c7e6ea20c7e4d3e7e4ea0d0a3a37303ae5d5c7d1eae120cad4daeae4eac90d0a3a32313a48494d423031313232483030343232350d0a3a3332423a53415236302c30300d0a3a35304b3a2f5341393136303030303030303033383436373836323030310d0a5741534d49414820534141442048414d454420414c535542414945450d0a3a35393a2f5341313538303030303231393630383031303036363333370d0a5741534d49414820414c534245414c0d0a3a37303ac7d3cacbe5c7d10d0a3a32313a48494d423031313232483030343232360d0a3a3332423a5341523135302c30300d0a3a35304b3a2f5341383636303030303030303034303438383437323030310d0a4d5548414d4d4144204a41424552204d5548414d4d414420414c46414946490d0a3a35393a2f5341393438303030303435343630383031303333343835330d0a414244554c5241484d414e20414244554c4c414820414c46414946490d0a3a37303ac7e4c3e7e420e8c7e4c3e2c7d1c82f20c7e4c3d5cfe2c7c10d0a3a32313a48494d423031313232483030343232380d0a3a3332423a534152313530302c30300d0a3a35304b3a2f5341323836303030303030303031393336343030323030310d0a53414c4548204159494448204157414420414c52455348454544490d0a3a35393a2f5341373938303030303237353630383031303132373935370d0a4d4f48414d4d414420415945444820414c524144484944490d0a3a37303ac7e4c3e7e420e8c7e4c3e2c7d1c82f20c7e4c3d5cfe2c7c10d0a3a32313a48494d423031313232483030343232390d0a3a3332423a5341523939352c30300d0a3a35304b3a2f5341303636303130303032313638303330393335363030310d0a414e454553482050414c414d4144415448494c205055544855504152414d42494c0d0a3a35393a2f5341363238303030303230353630383031363037393930300d0a4252494a49544820424142552042414255204a4f534550480d0a3a37303a46616d696c7920616e642052656c6174697665732f20467269656e64730d0a3a32313a48494d423031313232483030343233380d0a3a3332423a53415233353530302c30300d0a3a35304b3a2f5341353436303030303030303037303439333239313030320d0a414c4920594f5553454620414c4920414c5a554e415944490d0a3a35393a2f5341323438303030303532313630383031323030363738390d0a414c4920594f5553454620414c5a554e415944490d0a3a37303acacde8eae420e4cdd3c7c820d4ced5ea20e1ea20c8e6e320c2ced10d0a3a32313a48494d423031313232483030343233320d0a3a3332423a53415232313330302c30300d0a3a35304b3a2f5341383236303130303030373038303732323031383030310d0a524157414e2053414c454820414244554c5241484d414e20414c44484149460d0a3a35393a2f5341313338303030303132303630383031303231363832330d0acde5c7cf20d5c7e4cd20c7e4cee8ead7d10d0a3a37303ac7e4c3e7e420e8c7e4c3e2c7d1c82f20c7e4c3d5cfe2c7c10d0a3a32313a48494d423031313232483030343233330d0a3a3332423a534152373030302c30300d0a3a35304b3a2f5341343336303030303030303031313432333936313030310d0a4d4f48414d4d414420414c4e45414d41482041204b414e410d0a3a35393a2f5341393338303030303433323630383031303132333833320d0a484f53414d204d4f48414d4d414420414c4e454d4148204b414e4e410d0a3a37303ac7e4c3e7e420e8c7e4c3e2c7d1c82f20c7e4c3d5cfe2c7c10d0a3a32313a48494d423031313232483030343231300d0a3a3332423a534152313030302c30300d0a3a35304b3a2f5341353136303030303030303032323532353136303030310d0a4d455346455220414c57455341594d45520d0a3a35393a2f5341313238303030303134343630383031303637383731390d0a4641544d4120414c41534d4152490d0a3a37303ac7e4c3e7e420e8c7e4c3e2c7d1c82f20c7e4c3d5cfe2c7c10d0a3a32313a48494d423031313232483030343231350d0a3a3332423a534152333030302c30300d0a3a35304b3a2f5341353436303130303032313238303430313335353030310d0a415445455120414244554c415a495a20415445455120414c5348414d4d4152490d0a3a35393a2f5341373138303030303138333630383031303237383638360d0ad9caeae220c7e4d1c7cccdea0d0a3a37303acacde8eae420e4cdd3c7c820d4ced5ea20e1ea20c8e6e320c2ced10d0a3a32313a45434f463031313232483031313432300d0a3a3332423a534152343030302c30300d0a3a35304b3a2f5341363336303130303031333339353030323534363031340d0a44414d415343454e45204252424543554520524553544155524e54530d0a3a35393a2f5341343038303030303333323630383031303037303831300d0a424153454d204d414e534f520d0a3a37303ae5d5c7d1eae120cad4daeae4eac90d0a3a3332413a3230313132335341523230333831392c30300d0a2d'
# result = bytes.fromhex(s)

# todo: add try catch with error in error
# f1 : First raw file
# f2 : Second file (line by line separated)
from timer import timer


f1=open("../output/3x5K.txt", "r", encoding='utf8')
f2=open("../output/3x5K_out.txt", "w")
#s=f1.read()


def find_between_with_split(line, delimeter, cutAt, index ):
    try:
        return line.split(delimeter, cutAt)[index]
    except ValueError:
        return "find_between_with_split : Error finding ## in the line"


def custom_readbuffer(handle, line_separator="\n", new_line="\n", chunk_size=64):
    buf = "" 
    while not handle.closed:  
        data = handle.read(chunk_size)  
        if not data:  
            break  
        buf += data 
        if line_separator in buf:  
            chunks = buf.split(line_separator) #.replace("%@_@%", "###")
            buf = chunks.pop()  
            for chunk in chunks:  
                yield chunk + new_line
    if buf:
        yield buf 


@timer(1,1)
def main():
    for buf in custom_readbuffer(f1, '_@%@_', '\n' , 1024):
        f2.write(buf)


f1.close()
f2.close()






